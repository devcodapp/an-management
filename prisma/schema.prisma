// *** GENERATED BY PRISMIX :: DO NOT EDIT ***
datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Coupon {
  id                 String     @id @map("_id")
  title              String
  description        String
  code               String
  discountValue      Float?
  discountPercentage Float?
  discountLimit      Float?
  expiresIn          DateTime
  createdUser        String
  createdAt          DateTime   @default(now())
  deletedUser        String?
  deletedAt          DateTime?
  deleted            Boolean    @default(false)
  restaurantId       String
  restaurant         Restaurant @relation(name: "CouponToRestaurant", fields: [restaurantId], references: [id])
}

model Restaurant {
  id           String    @id @map("_id")
  coupons      Coupon[]  @relation(name: "CouponToRestaurant")
  name         String
  description  String
  tags         String[]
  type         String
  address      Json?
  phoneNumber  String?
  isOpened     Boolean   @default(false)
  openingHours Json?
  imageId      String?
  imageUrl     String?
  ownerId      String
  createdAt    DateTime  @default(now())
  disabledAt   DateTime?
  disabled     Boolean   @default(false)
  tables       Table[]   @relation(name: "RestaurantToTable")
  owner        User      @relation(name: "OWNER", fields: [ownerId], references: [id])
  users        User[]    @relation(name: "USERS")
}

model RestaurantType {
  id          String    @id @map("_id")
  name        String
  createdUser String
  createdAt   DateTime  @default(now())
  deletedUser String?
  deletedAt   DateTime?
  deleted     Boolean   @default(false)
  disabledAt  DateTime?
  disabled    Boolean   @default(false)
}

model Table {
  id             String     @id @map("_id")
  name           String
  amountOfChairs Float
  disabledAt     DateTime?
  createdUser    String
  createdAt      DateTime   @default(now())
  deletedUser    String?
  deletedAt      DateTime?
  deleted        Boolean    @default(false)
  restaurant     Restaurant @relation(name: "RestaurantToTable", fields: [restaurantId], references: [id])
  restaurantId   String
}

model User {
  id             String       @id @map("_id")
  name           String
  username       String       @unique
  email          String
  password       String
  changePassword Boolean      @default(true)
  deletedAt      DateTime?
  restaurant     Restaurant?  @relation(name: "USERS", fields: [restaurantId], references: [id], onDelete: NoAction, onUpdate: NoAction)
  restaurantId   String?
  Restaurant     Restaurant[] @relation(name: "OWNER")
  workers        Worker[]     @relation(name: "UserToWorker")
}

model Worker {
  id          String    @id @map("_id")
  name        String
  role        String
  imageId     String?
  imageUrl    String?
  createdUser String
  createdAt   DateTime  @default(now())
  deletedUser String?
  deletedAt   DateTime?
  deleted     Boolean   @default(false)
  userId      String
  user        User      @relation(name: "UserToWorker", fields: [userId], references: [id])
}
